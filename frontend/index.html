<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ikigai Mental Health Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6fb;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
    }
    button {
      background: #4f46e5;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #4338ca;
    }
    .card {
      background: #eef2ff;
      padding: 10px;
      border-radius: 8px;
      margin-top: 10px;
    }
    h3 {
      margin-top: 20px;
      color: #333;
    }
  </style>
</head>

<body>
<div class="container">
  <h2>ğŸŒ± Ikigai Mental Health Checker</h2>

  <input id="sleep" type="number" placeholder="Sleep hours" />
  <input id="study" type="number" placeholder="Study hours" />
  <input id="screen" type="number" placeholder="Screen time (hrs)" />
  <input id="activity" type="number" placeholder="Physical activity (mins)" />
  <input id="mood" type="number" placeholder="Mood (1â€“5)" />

  <button onclick="analyze()">Analyze</button>

  <div id="result"></div>
</div>

<script>
async function analyze() {
  const data = {
    sleep: Number(document.getElementById("sleep").value),
    study: Number(document.getElementById("study").value),
    screen: Number(document.getElementById("screen").value),
    activity: Number(document.getElementById("activity").value),
    mood: Number(document.getElementById("mood").value)
  };

  const response = await fetch("http://127.0.0.1:5000/ikigai", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  const res = await response.json();

  document.getElementById("result").innerHTML = `
    <h3>ğŸ”¹ Behavioral Insights (Normalized Scores)</h3>
    <div class="card">
      ğŸ›Œ Sleep: ${res.layer1_normalized.sleep_score}<br>
      ğŸ“š Study: ${res.layer1_normalized.study_score}<br>
      ğŸ“± Screen: ${res.layer1_normalized.screen_score}<br>
      ğŸƒ Activity: ${res.layer1_normalized.activity_score}<br>
      ğŸ˜Œ Mood: ${res.layer1_normalized.mood_score}
    </div>

    <h3>ğŸ”¹ Stress & Productivity Analysis</h3>
    <div class="card">
      ğŸ§  Stress Score: ${res.layer2_scores.stress_score}<br>
      âš ï¸ Stress Level (Rule-based): ${res.layer2_scores.rule_based_stress}<br>
      ğŸ“Š Productivity: ${res.layer2_scores.productivity_score}
    </div>

     <h3>ğŸ”¹ ML Validation & Safety Checks</h3>
     <div class="card">
       ğŸ¤– ML Stress Prediction: ${res.layer3_ml_support.ml_predicted_stress}<br>
       âœ… Final Stress Level: <b>${res.layer3_ml_support.final_stress_level}</b>
     </div>

    <h3>ğŸŒ¸ Ikigai Balance</h3>
    <div class="card">
      â¤ï¸ Love: ${res.layer3_ikigai.love}<br>
      ğŸ¯ Good At: ${res.layer3_ikigai.good_at}<br>
      ğŸŒ Need: ${res.layer3_ikigai.need}<br>
      ğŸ’¼ Value: ${res.layer3_ikigai.value}<br><br>
      â­ <b>Ikigai Score: ${res.layer3_ikigai.ikigai_score}</b>
    </div>
  `;
}
</script>
</body>
</html>
